{"ast":null,"code":"var _jsxFileName = \"/home/minho/mail_system/client/src/pages/signUp.js\";\nimport React, { Component } from \"react\";\nimport { Input, Form, Button, Table, Message } from \"semantic-ui-react\";\nimport { post } from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Layout from \"../components/Layout\";\nlet address;\n\nclass signUp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFormSubmit = e => {\n      e.preventDefault();\n      this.makeAddress(); //window.location.reload();\n    };\n\n    this.makeAddress = async () => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const response = await post(\"/api/address\");\n        console.log(response);\n        address = response.data;\n        console.log(address);\n        this.setState({\n          success: true\n        });\n      } catch (err) {\n        this.setState({\n          errorMessage: err.message\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n\n      if (this.state.success === true) {\n        this.addUser().then(response => {//console.log(response.data);\n        });\n        alert(\"가입 완료\");\n      }\n\n      this.setState({\n        id: \"\",\n        pw: \"\",\n        name: \"\",\n        p1: \"\",\n        p2: \"\",\n        p3: \"\",\n        email: \"\",\n        success: false\n      });\n      address = \"\";\n      console.log(address);\n    };\n\n    this.handleValueChange = e => {\n      let nextState = {};\n      nextState[e.target.name] = e.target.value;\n      this.setState(nextState);\n    };\n\n    this.addUser = () => {\n      const url = \"/api/users\";\n      const formData = new FormData();\n      formData.append(\"id\", this.state.id);\n      formData.append(\"pw\", this.state.pw);\n      formData.append(\"name\", this.state.name);\n      formData.append(\"p1\", this.state.p1);\n      formData.append(\"p2\", this.state.p2);\n      formData.append(\"p3\", this.state.p3);\n      formData.append(\"email\", this.state.email);\n      formData.append(\"address\", address);\n      const config = {\n        headers: {\n          \"content-type\": \"multipart/form-data\"\n        }\n      };\n      return post(url, formData, config);\n    };\n\n    this.callApi = async () => {\n      const response = await fetch(\"/api/users\");\n      const body = await response.json();\n      return body;\n    };\n\n    this.idCheck = () => {\n      const length = this.state.users.length;\n      let login_state = 0;\n      var i = 0;\n\n      for (i; i < length; i++) {\n        if (this.state.users[i].id === this.state.id) {\n          console.log(\"중복된 아이디 입니다.\");\n          break;\n        } else {\n          console.log(\"아이디 사용가능\");\n        }\n      }\n    };\n\n    this.state = {\n      errorMessage: \"\",\n      loading: false,\n      success: false,\n      id: \"\",\n      pw: \"\",\n      name: \"\",\n      p1: \"\",\n      p2: \"\",\n      p3: \"\",\n      email: \"\",\n      check_id: \"\"\n    };\n  }\n\n  ////아이디 중복 확인\n  componentDidMount() {\n    this.callApi().then(res => this.setState({\n      users: res\n    })).catch(err => console.log(err));\n  }\n\n  ////\n  render() {\n    return /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      singleLine: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, \"\\uD68C\\uC6D0\\uAC00\\uC785\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleFormSubmit,\n      error: this.state.errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        minWidth: \"6em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    }, \"\\uC544\\uC774\\uB514\"), /*#__PURE__*/React.createElement(Input, {\n      icon: \"user\",\n      iconPosition: \"left\",\n      name: \"id\",\n      style: {\n        minWidth: \"30em\"\n      },\n      value: this.state.id,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      basic: true,\n      color: \"violet\",\n      onClick: this.idCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 23\n      }\n    }, \"\\uC911\\uBCF5 \\uD655\\uC778\"))), /*#__PURE__*/React.createElement(Form.Field, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        minWidth: \"6em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, \"\\uBE44\\uBC00\\uBC88\\uD638\"), /*#__PURE__*/React.createElement(Input, {\n      icon: \"lock\",\n      name: \"pw\",\n      iconPosition: \"left\",\n      type: \"password\",\n      value: this.state.pw,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        minWidth: \"6em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, \"\\uC774\\uB984\"), /*#__PURE__*/React.createElement(Input, {\n      style: {\n        minWidth: \"30em\"\n      },\n      name: \"name\",\n      value: this.state.name,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        minWidth: \"6em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, \"\\uC5F0\\uB77D\\uCC98\"), /*#__PURE__*/React.createElement(Input, {\n      style: {\n        maxWidth: \"5em\"\n      },\n      name: \"p1\",\n      value: this.state.p1,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 23\n      }\n    }, \"-\"), /*#__PURE__*/React.createElement(Input, {\n      style: {\n        maxWidth: \"5em\"\n      },\n      name: \"p2\",\n      value: this.state.p2,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 23\n      }\n    }, \"-\"), /*#__PURE__*/React.createElement(Input, {\n      style: {\n        maxWidth: \"5em\"\n      },\n      name: \"p3\",\n      value: this.state.p3,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(Form.Field, {\n      inline: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      style: {\n        minWidth: \"6em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 21\n      }\n    }, \"\\uC774\\uBA54\\uC77C\"), /*#__PURE__*/React.createElement(Input, {\n      icon: \"at\",\n      name: \"email\",\n      iconPosition: \"left\",\n      placeholder: \"Email\",\n      style: {\n        minWidth: \"30em\"\n      },\n      value: this.state.email,\n      onChange: this.handleValueChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      header: \"Oops!\",\n      content: this.state.errorMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      loading: this.state.loading,\n      type: \"submit\",\n      basic: true,\n      color: \"violet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, \"\\uAC00\\uC785 \\uC644\\uB8CC\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      basic: true,\n      color: \"teal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 23\n      }\n    }, \"\\uD648\\uC73C\\uB85C\", \" \")))))))));\n  }\n\n}\n\nexport default signUp;","map":{"version":3,"sources":["/home/minho/mail_system/client/src/pages/signUp.js"],"names":["React","Component","Input","Form","Button","Table","Message","post","Link","Layout","address","signUp","constructor","props","handleFormSubmit","e","preventDefault","makeAddress","setState","loading","response","console","log","data","success","err","errorMessage","message","state","addUser","then","alert","id","pw","name","p1","p2","p3","email","handleValueChange","nextState","target","value","url","formData","FormData","append","config","headers","callApi","fetch","body","json","idCheck","length","users","login_state","i","check_id","componentDidMount","res","catch","render","minWidth","maxWidth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Input, Form, Button, Table, Message } from \"semantic-ui-react\";\nimport { post } from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Layout from \"../components/Layout\";\n\nlet address;\n\nclass signUp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMessage: \"\",\n      loading: false,\n      success: false,\n      id: \"\",\n      pw: \"\",\n      name: \"\",\n      p1: \"\",\n      p2: \"\",\n      p3: \"\",\n      email: \"\",\n      check_id: \"\"\n    };\n  }\n\n  handleFormSubmit = e => {\n    e.preventDefault();\n    this.makeAddress();\n\n    //window.location.reload();\n  };\n\n  makeAddress = async () => {\n    this.setState({ loading: true });\n    try {\n      const response = await post(\"/api/address\");\n      console.log(response);\n      address = response.data;\n      console.log(address);\n      this.setState({ success: true });\n    } catch (err) {\n      this.setState({ errorMessage: err.message });\n    }\n    this.setState({ loading: false });\n\n    if (this.state.success === true) {\n      this.addUser().then(response => {\n        //console.log(response.data);\n      });\n      alert(\"가입 완료\");\n    }\n\n    this.setState({\n      id: \"\",\n      pw: \"\",\n      name: \"\",\n      p1: \"\",\n      p2: \"\",\n      p3: \"\",\n      email: \"\",\n      success: false\n    });\n    address = \"\";\n    console.log(address);\n  };\n\n  handleValueChange = e => {\n    let nextState = {};\n    nextState[e.target.name] = e.target.value;\n    this.setState(nextState);\n  };\n\n  addUser = () => {\n    const url = \"/api/users\";\n    const formData = new FormData();\n    formData.append(\"id\", this.state.id);\n    formData.append(\"pw\", this.state.pw);\n    formData.append(\"name\", this.state.name);\n    formData.append(\"p1\", this.state.p1);\n    formData.append(\"p2\", this.state.p2);\n    formData.append(\"p3\", this.state.p3);\n    formData.append(\"email\", this.state.email);\n    formData.append(\"address\", address);\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n    return post(url, formData, config);\n  };\n\n  ////아이디 중복 확인\n  componentDidMount() {\n    this.callApi()\n      .then(res => this.setState({ users: res }))\n      .catch(err => console.log(err));\n  }\n\n  callApi = async () => {\n    const response = await fetch(\"/api/users\");\n    const body = await response.json();\n    return body;\n  };\n\n  idCheck = () => {\n    const length = this.state.users.length;\n\n    let login_state = 0;\n    var i = 0;\n    for (i; i < length; i++) {\n      if (this.state.users[i].id === this.state.id) {\n        console.log(\"중복된 아이디 입니다.\");\n        break;\n      } else {\n        console.log(\"아이디 사용가능\");\n      }\n    }\n\n  };\n\n  ////\n\n  render() {\n    return (\n      <Layout>\n        <Table singleLine>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell colSpan=\"2\">회원가입</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            <Table.Row>\n              <Table.Cell>\n                <Form\n                  onSubmit={this.handleFormSubmit}\n                  error={this.state.errorMessage}\n                >\n                  <Form.Group inline>\n                    <Form.Field>\n                      <label style={{ minWidth: \"6em\" }}>아이디</label>\n                      <Input\n                        icon=\"user\"\n                        iconPosition=\"left\"\n                        name=\"id\"\n                        style={{ minWidth: \"30em\" }}\n                        value={this.state.id}\n                        onChange={this.handleValueChange}\n                      />\n                    </Form.Field>\n                    <Form.Field>\n                      <Button\n                        type=\"submit\"\n                        basic\n                        color=\"violet\"\n                        onClick={this.idCheck}\n                      >\n                        중복 확인\n                      </Button>\n\n                    </Form.Field>\n                  </Form.Group>\n                  <Form.Field inline>\n                    <label style={{ minWidth: \"6em\" }}>비밀번호</label>\n                    <Input\n                      icon=\"lock\"\n                      name=\"pw\"\n                      iconPosition=\"left\"\n                      type=\"password\"\n                      value={this.state.pw}\n                      onChange={this.handleValueChange}\n                    />\n                  </Form.Field>\n                  <Form.Field inline>\n                    <label style={{ minWidth: \"6em\" }}>이름</label>\n                    <Input\n                      style={{ minWidth: \"30em\" }}\n                      name=\"name\"\n                      value={this.state.name}\n                      onChange={this.handleValueChange}\n                    />\n                  </Form.Field>\n                  <Form.Group inline>\n                    <Form.Field>\n                      <label style={{ minWidth: \"6em\" }}>연락처</label>\n                      <Input\n                        style={{ maxWidth: \"5em\" }}\n                        name=\"p1\"\n                        value={this.state.p1}\n                        onChange={this.handleValueChange}\n                      />\n                    </Form.Field>\n                    <Form.Field>\n                      <label>-</label>\n                      <Input\n                        style={{ maxWidth: \"5em\" }}\n                        name=\"p2\"\n                        value={this.state.p2}\n                        onChange={this.handleValueChange}\n                      />\n                    </Form.Field>\n                    <Form.Field>\n                      <label>-</label>\n                      <Input\n                        style={{ maxWidth: \"5em\" }}\n                        name=\"p3\"\n                        value={this.state.p3}\n                        onChange={this.handleValueChange}\n                      />\n                    </Form.Field>\n                  </Form.Group>\n                  <Form.Field inline>\n                    <label style={{ minWidth: \"6em\" }}>이메일</label>\n                    <Input\n                      icon=\"at\"\n                      name=\"email\"\n                      iconPosition=\"left\"\n                      placeholder=\"Email\"\n                      style={{ minWidth: \"30em\" }}\n                      value={this.state.email}\n                      onChange={this.handleValueChange}\n                    />\n                  </Form.Field>\n                  <Form.Field>\n                    <Message\n                      error\n                      header=\"Oops!\"\n                      content={this.state.errorMessage}\n                    />\n                    <Button\n                      loading={this.state.loading}\n                      type=\"submit\"\n                      basic\n                      color=\"violet\"\n                    >\n                      가입 완료\n                    </Button>\n                    <Link to=\"/\">\n                      <Button type=\"submit\" basic color=\"teal\">\n                        홈으로{\" \"}\n                      </Button>\n                    </Link>\n                  </Form.Field>\n                </Form>\n              </Table.Cell>\n            </Table.Row>\n          </Table.Body>\n        </Table>\n      </Layout>\n    );\n  }\n}\n\nexport default signUp;\n"]},"metadata":{},"sourceType":"module"}